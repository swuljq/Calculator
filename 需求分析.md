# 需求分析

## 项目背景

本项目旨在开发一个跨平台的计算器系统，采用分层架构设计。系统由三大部分组成：前端客户端（Java）、中间控制层（Python）和后端计算层（C）。每一层均使用不同语言实现，且通过统一规范的接口（HTTP + JSON）进行通信，以满足用户对表达式输入、检测、转换和计算的需求。

## 系统功能需求

### 客户端功能

1. 界面需求
	- 提供一个简洁、直观的图形用户界面（GUI），包括数字按钮（0 - 9）、运算符按钮（+、-、*、/、(、)等）、清除按钮、等号按钮等基本元素。
	- 设计一个输入框，用于显示用户输入的表达式和最终的计算结果。
	- 界面布局合理，按钮大小适中，易于用户操作。
2. 用户交互处理
	- 捕获用户的点击事件，将按钮对应的数字或运算符添加到输入框中的表达式里。
	- 当用户点击清除按钮时，能够清空输入框中的表达式。
	- 点击等号按钮时，将输入框中的完整表达式通过规范化接口传递给中间层。

### 中间层功能

1. 表达式检测
	- 检测表达式中的括号是否匹配，确保每对括号正确闭合。
	- 检查表达式是否完整，例如是否存在连续的运算符（如“++”、“-+”等）或缺少操作数的情况。
	- 若检测到表达式存在问题，返回错误信息给客户端，并提示用户修改表达式。
2. 表达式转换
	- 将符合要求的表达式转换为后缀表达式数组。
	- 转换过程中遵循正确的运算符优先级和括号规则。
	- 将转换后的后缀表达式数组通过规范化接口传递给计算服务端。

### 计算层功能

1. 表达式计算
	- 接收中间层传来的后缀表达式数组，按照后缀表达式的计算规则进行计算。
	- 能够处理包含基本运算符（+、-、*、/）的表达式。
	- 在计算过程中，对可能出现的异常情况进行处理，如除数为零等，并返回相应的错误信息。
2. 结果回传
	- 将计算结果通过规范化接口回传给中间层，由中间层进一步传递给客户端。
	- 确保计算结果的准确性和及时性，以便客户端能够及时显示给用户。

## 系统非功能需求

- 模块解耦：三部分可独立测试、部署。
- 可扩展性：后续可增加更多函数或图形显示功能。
- 容错性：中间层和计算层需具备异常检测与回报机制。
- 性能：适合本地快速响应，延迟低于 200ms

## 外部接口需求

- 用户界面接口：图形界面（GUI），提供输入框、结果显示区、计算按钮等；
- 软件接口
	- 客户端——->中间层：post请求，发送中缀表达式；
	- 中间层——->计算层：post请求，发送后缀表达式数组。
